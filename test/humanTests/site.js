#!/usr/bin/env node
				"use strict";
				global.__scopedir = __dirname;
				require('source-map-support').install();
				const scope = require("/home/spence/Projects/scope/lib/scopeRuntime.js");
				const ScopeApi = require("/home/spence/Projects/scope/lib/scopeRuntimeApi.js")(scope);module.exports=scope.invokeExpression({function:scope.createScope((args)=>{scope.declarationExpression({
				type: "let",
				name: "server",
				value: scope.invokeExpression({function:scope.import("/home/spence/Projects/scope/packages/serve/main.js"),arguments:[],context:this})
			});scope.declarationExpression({
				type: "let",
				name: "template",
				value: scope.import("/home/spence/Projects/scope/test/humanTests/inc/template.js")
			});scope.declarationExpression({
				type: "let",
				name: "loadPages",
				value: scope.import("/home/spence/Projects/scope/test/humanTests/inc/loadPages.js")
			});scope.declarationExpression({
				type: "let",
				name: "loader",
				value: scope.invokeExpression({function:scope.identifier("loadPages"),arguments:["inc/pages"],context:this})
			});scope.assignmentExpression([scope.identifier("template"),"manifest"],["=", scope.mapExpression(["short_name","Scope Test"],["name","Scope Programming Language Test Site"],["start_url","/"],["background_color","#FFFFFF"],["display","standalone"],["scope","/"],["theme_color","#0090D2"])]);scope.assignmentExpression([scope.identifier("template"),"styleLink"],["=", "/styles/main.css"]);scope.assignmentExpression([scope.identifier("template"),"nav"],["=", scope.mapExpression(["Home","/home"],["Documentation","/docs"],["About","/about"],["Contact","/contact"])]);scope.declarationExpression({
				type: "let",
				name: "notFound",
				value: scope.mapExpression(["title","404: Not Found"],["url","404"],["body",scope.xmlExpression("article",{},scope.xmlExpression("h2",{},"We have a problem.."),scope.xmlExpression("div",{},scope.xmlExpression("strong",{},"404 Not Found:")," The requested page was not found."))])
			});scope.invokeExpression({function:scope.identifier("server")["manifest"],arguments:[scope.identifier("template")["manifest"]],context:scope.identifier("server")});scope.invokeExpression({function:scope.identifier("server")["get"],arguments:["/",scope.createScope((args)=>{scope.declarationExpression({
				type: "let",
				name: "client",
				value: args[0] === undefined ? scope.mapExpression() : args[0]
			});
scope.invokeExpression({function:scope.identifier("client")["response"]["redirect"],arguments:[301,"/home"],context:scope.identifier("client")["response"]});})],context:scope.identifier("server")});scope.invokeExpression({function:scope.identifier("server")["get"],arguments:["/404",scope.createScope((args)=>{scope.declarationExpression({
				type: "let",
				name: "client",
				value: args[0] === undefined ? scope.mapExpression() : args[0]
			});
scope.invokeExpression({function:scope.identifier("client")["response"]["status"],arguments:[404],context:scope.identifier("client")["response"]});scope.invokeExpression({function:scope.identifier("client")["response"]["render"],arguments:[scope.invokeExpression({function:scope.identifier("template")["generate"],arguments:[scope.identifier("notFound")],context:scope.identifier("template")})],context:scope.identifier("client")["response"]});})],context:scope.identifier("server")});scope.invokeExpression({function:scope.identifier("server")["get"],arguments:[scope.identifier("template")["styleLink"],scope.createScope((args)=>{scope.declarationExpression({
				type: "let",
				name: "client",
				value: args[0] === undefined ? scope.mapExpression() : args[0]
			});
scope.invokeExpression({function:scope.identifier("client")["response"]["sendStyle"],arguments:[scope.identifier("template")["stylesheet"]],context:scope.identifier("client")["response"]});})],context:scope.identifier("server")});scope.invokeExpression({function:scope.invokeExpression({function:ScopeApi.promise["all"],arguments:[scope.identifier("loader")["promises"]],context:ScopeApi.promise})["then"],arguments:[scope.createScope((args)=>{scope.declarationExpression({
				type: "let",
				name: "pages",
				value: args[0] === undefined ? scope.mapExpression() : args[0]
			});
scope.invokeExpression({function:scope.identifier("server")["get"],arguments:["/:page",scope.createScope((args)=>{scope.declarationExpression({
				type: "let",
				name: "client",
				value: args[0] === undefined ? scope.mapExpression() : args[0]
			});
scope.declarationExpression({
				type: "let",
				name: "renderred",
				value: false
			});scope.invokeExpression({function:ScopeApi['each'],arguments:[scope.identifier("pages"),scope.createScope((args)=>{scope.declarationExpression({
				type: "let",
				name: "sc",
				value: args[0] === undefined ? scope.createScope((args)=>{}) : args[0]
			});
scope.declarationExpression({
				type: "let",
				name: "name",
				value: args[1] === undefined ? "" : args[1]
			});
scope.invokeExpression({function:ScopeApi['if'],arguments:[scope.binaryExpression('===', scope.identifier("name"), scope.identifier("client")["request"]["params"]["page"]),scope.createScope((args)=>{scope.use([scope.identifier("sc")]);scope.invokeExpression({function:scope.identifier("client")["response"]["render"],arguments:[scope.invokeExpression({function:scope.identifier("page"),arguments:[scope.identifier("template")["generate"]],context:this}),false],context:scope.identifier("client")["response"]});scope.assignmentExpression(["renderred"],["=", true]);})],context:this});})],context:this});scope.invokeExpression({function:ScopeApi['if'],arguments:[!scope.identifier("renderred"),scope.createScope((args)=>{scope.invokeExpression({function:scope.identifier("client")["response"]["status"],arguments:[404],context:scope.identifier("client")["response"]});scope.invokeExpression({function:scope.identifier("client")["response"]["render"],arguments:[scope.invokeExpression({function:scope.identifier("template")["generate"],arguments:[scope.identifier("notFound")],context:scope.identifier("template")})],context:scope.identifier("client")["response"]});})],context:this});})],context:scope.identifier("server")});})],context:this});scope.invokeExpression({function:scope.identifier("server")["listen"],arguments:[scope.mapExpression(["port",8080],["clientScope",true]),scope.createScope((args)=>{scope.invokeExpression({function:ScopeApi.print,arguments:["Server running on 8080"],context:this});})],context:scope.identifier("server")});}),arguments:[],context:this});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NwZW5jZS9Qcm9qZWN0cy9zY29wZS90ZXN0L2h1bWFuVGVzdHMvc2l0ZS5zYyJdLCJuYW1lcyI6WyI8YW5vbnltb3VzZT4iLCI8c2NvcGU+IiwidGVtcGxhdGUiLCJzY29wZS5pZGVudGlmaWVyKFwidGVtcGxhdGVcIikubWFuaWZlc3QiLCJzY29wZS5pZGVudGlmaWVyKFwidGVtcGxhdGVcIikuc3R5bGVMaW5rIiwic2NvcGUuaWRlbnRpZmllcihcInRlbXBsYXRlXCIpLm5hdiIsInNlcnZlciIsInNjb3BlLmlkZW50aWZpZXIoXCJzZXJ2ZXJcIikubWFuaWZlc3QiLCJzY29wZS5pZGVudGlmaWVyKFwic2VydmVyXCIpLmdldCIsImNsaWVudCIsInNjb3BlLmlkZW50aWZpZXIoXCJjbGllbnRcIikucmVzcG9uc2UiLCJzY29wZS5pZGVudGlmaWVyKFwiY2xpZW50XCIpW1wicmVzcG9uc2VcIl0ucmVkaXJlY3QiLCJzY29wZS5pZGVudGlmaWVyKFwiY2xpZW50XCIpW1wicmVzcG9uc2VcIl0uc3RhdHVzIiwic2NvcGUuaWRlbnRpZmllcihcImNsaWVudFwiKVtcInJlc3BvbnNlXCJdLnJlbmRlciIsInNjb3BlLmlkZW50aWZpZXIoXCJ0ZW1wbGF0ZVwiKS5nZW5lcmF0ZSIsIm5vdEZvdW5kIiwic2NvcGUuaWRlbnRpZmllcihcImNsaWVudFwiKVtcInJlc3BvbnNlXCJdLnNlbmRTdHlsZSIsInNjb3BlLmlkZW50aWZpZXIoXCJ0ZW1wbGF0ZVwiKS5zdHlsZXNoZWV0IiwicHJvbWlzZSIsIlNjb3BlQXBpLnByb21pc2UuYWxsIiwibG9hZGVyIiwic2NvcGUuaWRlbnRpZmllcihcImxvYWRlclwiKS5wcm9taXNlcyIsIjxtYXA+LnRoZW4iLCJ0aGVuIiwiZWFjaCIsInBhZ2VzIiwiaWYiLCJwYWdlIiwicmVuZGVycmVkIiwic2NvcGUuaWRlbnRpZmllcihcInNlcnZlclwiKS5saXN0ZW4iLCJwcmludCJdLCJtYXBwaW5ncyI6IkFBb0crQkE7QUFB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ckJDLGlDQUR6QkssMEJBQUF1QixVQUN5QjVCLFlBRGFELHVEQUNiQSw0QkFBQUMsaUNBQXpCNkIsY0FBeUI3QixZQUFBRCx3QkFBQUMsZ0JBQUFELEdBQUFDLFVBRHpCSywwQkFDeUJMLEVBQUFELEdBQUFDLDRCQUFBRCIsInNvdXJjZXNDb250ZW50IjpbImxldCBzZXJ2ZXIgPSBpbXBvcnQgXCJzZXJ2ZVwiKC8qW1xuXHRrZXk6IFwibGliL3NlcnZlci5rZXlcIixcblx0Y2VydDogXCJsaWIvc2VydmVyLmNlcnRcIlxuXSovKTtcbi8qXG5sZXQgZGIgPSBpbXBvcnQgXCJpbmMvZGIuc2NcIjtcbmxldCB1c2VycyA9IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKTtcbmxldCBuZXdVc2VyID0gW1xuXHR1c2VybmFtZTogXCJmb29cIixcblx0cGFzc3dvcmQ6IFwiYmFyXCIsXG5cdGVtYWlsOiBcImZvb0BleGFtcGxlLmNvbVwiXG5dO1xuXG51c2Vycy5pbnNlcnQobmV3VXNlciwgKGVycjogXCJcIiwgdmFsdWU6IFwiXCIpIHtcblx0aWYoZXJyLCB7XG5cdFx0cHJpbnQoXCJpbnNlcnQgZXJyb3I6XCIsIGVycik7XG5cdH0sIHtcblx0XHRwcmludChcImluc2VydCBzdWNjZXNzZnVsOlwiLCB2YWx1ZSk7XG5cdH0pO1xufSk7XG5cbmRiLm9uKFwiZXJyb3JcIiwgKGVycjogXCJcIikge1xuXHRwcmludChcIkRCIEVycm9yOlwiLCBlcnIpO1xufSk7XG5cbmRiLm9uKFwiY29ubmVjdFwiLCB7XG5cdHByaW50KFwiREIgQ29ubmVjdGVkIVwiKTtcbn0pO1xuKi9cbmxldCB0ZW1wbGF0ZSA9IGltcG9ydCBcImluYy90ZW1wbGF0ZS5zY1wiO1xubGV0IGxvYWRQYWdlcyA9IGltcG9ydCBcImluYy9sb2FkUGFnZXMuc2NcIjtcblxubGV0IGxvYWRlciA9IGxvYWRQYWdlcyhcImluYy9wYWdlc1wiKTtcblxudGVtcGxhdGUubWFuaWZlc3QgPSBbXG5cdHNob3J0X25hbWU6IFwiU2NvcGUgVGVzdFwiLFxuXHRuYW1lOiBcIlNjb3BlIFByb2dyYW1taW5nIExhbmd1YWdlIFRlc3QgU2l0ZVwiLFxuXHRzdGFydF91cmw6IFwiL1wiLFxuXHRiYWNrZ3JvdW5kX2NvbG9yOiBcIiNGRkZGRkZcIixcblx0ZGlzcGxheTogXCJzdGFuZGFsb25lXCIsXG5cdHNjb3BlOiBcIi9cIixcblx0dGhlbWVfY29sb3I6IFwiIzAwOTBEMlwiXG5dO1xuXG50ZW1wbGF0ZS5zdHlsZUxpbmsgPSBcIi9zdHlsZXMvbWFpbi5jc3NcIjtcblxudGVtcGxhdGUubmF2ID0gW1xuXHRIb21lOiBcIi9ob21lXCIsXG5cdERvY3VtZW50YXRpb246IFwiL2RvY3NcIixcblx0QWJvdXQ6IFwiL2Fib3V0XCIsXG5cdENvbnRhY3Q6IFwiL2NvbnRhY3RcIlxuXTtcblxubGV0IG5vdEZvdW5kID0gW1xuXHR0aXRsZTogXCI0MDQ6IE5vdCBGb3VuZFwiLFxuXHR1cmw6IFwiNDA0XCIsXG5cdGJvZHk6IFxuXHQ8YXJ0aWNsZT5cblx0XHQ8aDI+XG5cdFx0XHRcIldlIGhhdmUgYSBwcm9ibGVtLi5cIjtcblx0XHQ8L2gyPjtcblx0XHQ8ZGl2PlxuXHRcdFx0PHN0cm9uZz5cIjQwNCBOb3QgRm91bmQ6XCI7PC9zdHJvbmc+O1xuXHRcdFx0XCIgVGhlIHJlcXVlc3RlZCBwYWdlIHdhcyBub3QgZm91bmQuXCI7XG5cdFx0PC9kaXY+O1xuXHQ8L2FydGljbGU+XG5dO1xuXG5zZXJ2ZXIubWFuaWZlc3QodGVtcGxhdGUubWFuaWZlc3QpO1xuXG5zZXJ2ZXIuZ2V0KFwiL1wiLCAoY2xpZW50OiBbXSkge1xuXHRjbGllbnQucmVzcG9uc2UucmVkaXJlY3QoMzAxLCBcIi9ob21lXCIpO1xufSk7XG5cbnNlcnZlci5nZXQoXCIvNDA0XCIsIChjbGllbnQ6IFtdKSB7XG5cdGNsaWVudC5yZXNwb25zZS5zdGF0dXMoNDA0KTtcblx0Y2xpZW50LnJlc3BvbnNlLnJlbmRlcih0ZW1wbGF0ZS5nZW5lcmF0ZShub3RGb3VuZCkpO1xufSk7XG5cbnNlcnZlci5nZXQodGVtcGxhdGUuc3R5bGVMaW5rLCAoY2xpZW50OiBbXSkge1xuXHRjbGllbnQucmVzcG9uc2Uuc2VuZFN0eWxlKHRlbXBsYXRlLnN0eWxlc2hlZXQpO1xufSk7XG5wcm9taXNlLmFsbChsb2FkZXIucHJvbWlzZXMpLnRoZW4oKHBhZ2VzOiBbXSkge1xuXHRzZXJ2ZXIuZ2V0KFwiLzpwYWdlXCIsIChjbGllbnQ6IFtdKSB7XG5cdFx0bGV0IHJlbmRlcnJlZCA9IGZhbHNlO1xuXHRcdGVhY2gocGFnZXMsIChzYzoge30sIG5hbWU6IFwiXCIpIHtcblx0XHRcdGlmIChuYW1lIGlzIGNsaWVudC5yZXF1ZXN0LnBhcmFtcy5wYWdlLCB7XG5cdFx0XHRcdHVzZSBzYztcblx0XHRcdFx0Y2xpZW50LnJlc3BvbnNlLnJlbmRlcihwYWdlKHRlbXBsYXRlLmdlbmVyYXRlKSwgZmFsc2UpO1xuXHRcdFx0XHRyZW5kZXJyZWQgPSB0cnVlO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0aWYgKCFyZW5kZXJyZWQsIHtcblx0XHRcdGNsaWVudC5yZXNwb25zZS5zdGF0dXMoNDA0KTtcblx0XHRcdGNsaWVudC5yZXNwb25zZS5yZW5kZXIodGVtcGxhdGUuZ2VuZXJhdGUobm90Rm91bmQpKTtcblx0XHR9KTtcblx0fSk7XG59KTtcblxuc2VydmVyLmxpc3RlbihbcG9ydDogODA4MCwgY2xpZW50U2NvcGU6IHRydWVdLCB7XG5cdHByaW50KFwiU2VydmVyIHJ1bm5pbmcgb24gODA4MFwiKTtcbn0pOyJdfQ==