#!/usr/bin/env node
"use strict";global.__scopedir=__dirname;require("source-map-support").install();const scope=require("/home/spence/Projects/scope/lib/scopeRuntime.js");const ScopeApi=require("/home/spence/Projects/scope/lib/scopeRuntimeApi.js")(scope);module.exports=scope.createScope(function(args){scope.declarationExpression({type:"let",name:"Serve",value:scope.import("/home/spence/Projects/scope/packages/serve/main.js")});scope.declarationExpression({type:"let",name:"server",value:scope.identifier("Serve")()});scope.identifier("server")["get"]("/",scope.createScope(function(args){scope.declarationExpression({type:"let",name:"client",value:args[0]===undefined?scope.mapExpression():args[0]});scope.identifier("client")["response"]["render"](scope.identifier("site"));}));scope.identifier("server")["on"]("say",scope.createScope(function(args){scope.declarationExpression({type:"let",name:"client",value:args[0]===undefined?scope.mapExpression():args[0]});scope.declarationExpression({type:"let",name:"data",value:args[1]===undefined?"":args[1]});ScopeApi.print("Client says:",scope.identifier("data"));scope.identifier("client")["emit"]("echo",scope.identifier("data"));}));scope.identifier("server")["on"]("clicked",scope.createScope(function(args){scope.declarationExpression({type:"let",name:"client",value:args[0]===undefined?scope.mapExpression():args[0]});scope.declarationExpression({type:"let",name:"data",value:args[1]===undefined?"":args[1]});ScopeApi.print("clicked");}));scope.identifier("server")["listen"](scope.mapExpression(["port",8080],["clientScope",true]),scope.createScope(function(args){ScopeApi.print("Server running on port 8080");}));scope.declarationExpression({type:"let",name:"stylesheet",value:scope.mapExpression(["h1",scope.mapExpression(["font-family","sans-serif"],["color","#AAA"],["margin",0],["padding",0])],["input",scope.mapExpression(["padding","5px"],["border","none"],["outline","none"],["box-shadow","0px 0px 5px #DDDDDD"],[":focus",scope.mapExpression(["border","none"],["outline","none"],["box-shadow","0px 0px 5px #00DDDD"])],["border-radius","2px"],["transition",".3s ease-in-out"])])});scope.declarationExpression({type:"let",name:"siteIo",value:scope.xmlExpression("div",{"id":"io"},scope.xmlExpression("input",{"type":"text", "onKeyUp":scope.createScope(function(args){scope.declarationExpression({type:"let",name:"e",value:args[0]===undefined?scope.mapExpression():args[0]});scope.identifier("socket")["emit"]("say",scope.identifier("e")["target"]["value"]);})}),scope.xmlExpression("div",{"bind-out":"echo"}),scope.xmlExpression("button",{"onclick":scope.createScope(function(args){scope.declarationExpression({type:"let",name:"e",value:args[0]===undefined?scope.mapExpression():args[0]});scope.identifier("socket")["emit"]("clicked");})},"Send to 'clicked' channel"))});scope.declarationExpression({type:"let",name:"site",value:scope.xmlExpression("html",{},scope.xmlExpression("head",{},scope.xmlExpression("title",{},"Scope Server Test"),scope.xmlExpression("style",{},scope.identifier("stylesheet"))),scope.xmlExpression("body",{},scope.xmlExpression("h1",{},"Hello Scope Server"),scope.identifier("siteIo")))});})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NwZW5jZS9Qcm9qZWN0cy9zY29wZS90ZXN0L2h1bWFuVGVzdHMvbGliSW1wb3J0LnNjIl0sIm5hbWVzIjpbIjxhbm9ueW1vdXNlPiIsInNlcnZlciIsInNjb3BlLmlkZW50aWZpZXIoXCJzZXJ2ZXJcIikuZ2V0IiwiaW52b2tlRXhwcmVzc2lvbiIsImNsaWVudCIsInNjb3BlLmlkZW50aWZpZXIoXCJjbGllbnRcIikucmVzcG9uc2UiLCJzY29wZS5pZGVudGlmaWVyKFwiY2xpZW50XCIpW1wicmVzcG9uc2VcIl0ucmVuZGVyIiwic2l0ZSIsInNjb3BlLmlkZW50aWZpZXIoXCJzZXJ2ZXJcIikub24iLCJwcmludCIsImRhdGEiLCJzY29wZS5pZGVudGlmaWVyKFwiY2xpZW50XCIpLmVtaXQiLCJzY29wZS5pZGVudGlmaWVyKFwic2VydmVyXCIpLmxpc3RlbiJdLCJtYXBwaW5ncyI6IkFBc0VRQTtBQUFBQSw0UkF0RWtCQSxnSUFFUEEsMEZBRWJDLDBCQUFBQyxPQUNzQkMsQ0FEZEgsR0FDY0Esa0pBQXJCSSwwQkFBQUMsWUFBQUMsVUFBcUJILENBQUFJLHdCQUFBSixDQUFBSCxHQUFBRyxDQUFBSCxDQUd0QkMsMEJBQUFPLE1BRW1CTCxDQUZWSCxLQUVVQSw2T0FEbkJTLGNBQXFCTixDQUFOSCxjQUFNQSxDQUFBVSx3QkFBQVAsQ0FBQUgsQ0FDcEJJLDBCQUFBTyxRQUFrQlIsQ0FBTkgsTUFBTUEsQ0FBQVUsd0JBQUFQLENBQUFILEdBQUFHLENBQUFILENBR25CQywwQkFBQU8sTUFDVUwsQ0FER0gsU0FDSEEsNk9BQVZTLGNBQVVOLENBQUFILFNBQUFHLENBQUFILEdBQUFHLENBQUFILENBR1ZDLDBCQUFBVyxVQUM4QlQsQ0FEUUgsdURBQ1JBLGtDQUE5QlMsY0FBOEJOLENBQUFILDZCQUFBRyxDQUFBSCxHQUFBRyxDQUFBSCxDQXNCbkNBLDBkQVk0QkEsaXJCQWtCckJBLDJWQUFBRyxFQUFBSCIsInNvdXJjZXNDb250ZW50IjpbImxldCBTZXJ2ZSA9IGltcG9ydCBcInNlcnZlXCI7XG5cbmxldCBzZXJ2ZXIgPSBTZXJ2ZSgpO1xuXG5zZXJ2ZXIuZ2V0KFwiL1wiLCAoY2xpZW50OiBbXSkge1xuXHRjbGllbnQucmVzcG9uc2UucmVuZGVyKHNpdGUpO1xufSk7XG5cbnNlcnZlci5vbihcInNheVwiLCAoY2xpZW50OiBbXSwgZGF0YTogXCJcIikge1xuXHRwcmludChcIkNsaWVudCBzYXlzOlwiLCBkYXRhKTtcblx0Y2xpZW50LmVtaXQoXCJlY2hvXCIsIGRhdGEpO1xufSk7XG5cbnNlcnZlci5vbihcImNsaWNrZWRcIiwgKGNsaWVudDogW10sIGRhdGE6IFwiXCIpIHtcblx0cHJpbnQoXCJjbGlja2VkXCIpO1xufSk7XG5cbnNlcnZlci5saXN0ZW4oW3BvcnQ6IDgwODAsIGNsaWVudFNjb3BlOiB0cnVlXSwge1xuXHRwcmludChcIlNlcnZlciBydW5uaW5nIG9uIHBvcnQgODA4MFwiKTtcbn0pO1xuXG5sZXQgc3R5bGVzaGVldCA9IFtcblx0XCJoMVwiOiBbXG5cdFx0Zm9udC1mYW1pbHk6IFwic2Fucy1zZXJpZlwiLFxuXHRcdGNvbG9yOiBcIiNBQUFcIixcblx0XHRtYXJnaW46IDAsXG5cdFx0cGFkZGluZzogMCBcblx0XSxcblx0XCJpbnB1dFwiOiBbXG5cdFx0cGFkZGluZzogXCI1cHhcIixcblx0XHRib3JkZXI6IFwibm9uZVwiLFxuXHRcdG91dGxpbmU6IFwibm9uZVwiLFxuXHRcdGJveC1zaGFkb3c6IFwiMHB4IDBweCA1cHggI0RERERERFwiLFxuXHRcdFwiOmZvY3VzXCI6IFtcblx0XHRcdGJvcmRlcjogXCJub25lXCIsXG5cdFx0XHRvdXRsaW5lOiBcIm5vbmVcIixcblx0XHRcdGJveC1zaGFkb3c6IFwiMHB4IDBweCA1cHggIzAwRERERFwiXG5cdFx0XSxcblx0XHRib3JkZXItcmFkaXVzOiBcIjJweFwiLFxuXHRcdHRyYW5zaXRpb246IFwiLjNzIGVhc2UtaW4tb3V0XCJcblx0XVxuXTtcblxubGV0IHNpdGVJbyA9IDxkaXYgaWQ9XCJpb1wiPlxuXHQvLzxpbnB1dCB0eXBlPVwidGV4dFwiIGJpbmQtaW49XCJrZXl1cDpzYXlcIiAvPjtcblx0PGlucHV0IHR5cGU9XCJ0ZXh0XCIgb25LZXlVcD0oZTogW10pIHtcblx0XHRzb2NrZXQuZW1pdChcInNheVwiLCBlLnRhcmdldC52YWx1ZSk7XG5cdH0gLz47XG5cdDxkaXYgYmluZC1vdXQ9XCJlY2hvXCIgLz47XG5cdDxidXR0b24gb25jbGljaz0oZTogW10pIHtcblx0XHRzb2NrZXQuZW1pdChcImNsaWNrZWRcIik7XG5cdH0+XG5cdFx0XCJTZW5kIHRvICdjbGlja2VkJyBjaGFubmVsXCI7XG5cdDwvYnV0dG9uPjtcbjwvZGl2PjtcblxubGV0IHNpdGUgPSBcbjxodG1sPlxuXHQ8aGVhZD5cblx0XHQ8dGl0bGU+XG5cdFx0XHRcIlNjb3BlIFNlcnZlciBUZXN0XCI7XG5cdFx0PC90aXRsZT47XG5cdFx0PHN0eWxlPlxuXHRcdFx0c3R5bGVzaGVldDtcblx0XHQ8L3N0eWxlPjtcblx0PC9oZWFkPjtcblx0PGJvZHk+XG5cdFx0PGgxPlxuXHRcdFx0XCJIZWxsbyBTY29wZSBTZXJ2ZXJcIjtcblx0XHQ8L2gxPjtcblx0XHRzaXRlSW87XG5cdDwvYm9keT47XG48L2h0bWw+OyJdfQ==