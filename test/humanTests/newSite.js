#!/usr/bin/env node
"use strict";global.__scopedir=__dirname;require("source-map-support").install();const scope=require("/home/spence/Projects/scope/lib/scopeRuntime.js");const ScopeApi=require("/home/spence/Projects/scope/lib/scopeRuntimeApi.js")(scope);let XRegExp = require('xregexp');module.exports=scope.createScope(function(args){scope.declarationExpression({type:"let",name:"server",value:scope.import("/home/spence/Projects/scope/packages/serve/main.js")()});scope.declarationExpression({type:"let",name:"tellServer",value:scope.createScope(function(args){scope.declarationExpression({type:"let",name:"event",value:args[0]===undefined?scope.arrayExpression():args[0]});scope.identifier("event")["preventDefault"]();scope.declarationExpression({type:"let",name:"data",value:scope.mapExpression(["username",scope.identifier("event")["target"]["username"]["value"]],["password",scope.identifier("event")["target"]["password"]["value"]])});scope.identifier("socket")["emit"]("register",scope.identifier("data"));return false;})});scope.declarationExpression({type:"let",name:"userPattern",value:XRegExp("^[a-zA-Z0-9-_]{3,32}$","")});scope.declarationExpression({type:"let",name:"passPattern",value:XRegExp("^(?=.*[a-zA-Z]+)(?=.*[0-9]+)(?=.*[^a-zA-Z0-9]).{3,32}$","")});scope.declarationExpression({type:"let",name:"makeUserForm",value:scope.xmlExpression("form",{"onSubmit":scope.identifier("tellServer")},scope.xmlExpression("label",{"for":"username"},"Usernames may have 3-32 letters, numbers, hyphens (-) and underscores (_)."),scope.xmlExpression("br",{}),scope.xmlExpression("input",{"id":"username","name":"username","placeholder":"Username","pattern":scope.identifier("userPattern"),"minlength":3,"maxLength":32,"required":true}),scope.xmlExpression("br",{}),scope.xmlExpression("label",{"for":"password"},"Passwords may have 3-32 characters- but must contain at least 1 letter, 1 number, and 1 special character."),scope.xmlExpression("br",{}),scope.xmlExpression("input",{"id":"password","type":"password","name":"password","placeholder":"Password","pattern":scope.identifier("passPattern"),"minlength":3,"maxLength":32,"required":true}),scope.xmlExpression("br",{}),scope.xmlExpression("button",{"type":"submit"},"Register"))});scope.declarationExpression({type:"let",name:"page",value:scope.xmlExpression("html",{},scope.xmlExpression("head",{},scope.xmlExpression("title",{},"register")),scope.xmlExpression("body",{},scope.xmlExpression("div",{"bind-out":"register"}),scope.identifier("makeUserForm")))});scope.identifier("server")["on"]("register",scope.createScope(function(args){scope.declarationExpression({type:"let",name:"client",value:args[0]===undefined?scope.arrayExpression():args[0]});scope.declarationExpression({type:"let",name:"data",value:args[1]===undefined?scope.arrayExpression():args[1]});ScopeApi['if'](scope.identifier("data")["has"]("error"),scope.createScope(function(args){ScopeApi.print(scope.identifier("data")["error"]);scope.identifier("client")["emit"]("register","Something went wrong..");}),scope.createScope(function(args){scope.declarationExpression({type:"let",name:"cond",value:scope.identifier("data")["has"]("username")});scope.assignmentExpression(["cond"],["=",scope.binaryExpression("&&",scope.identifier("cond"),scope.identifier("userPattern")["test"](scope.identifier("data")["username"]))]);scope.assignmentExpression(["cond"],["=",scope.binaryExpression("&&",scope.identifier("cond"),scope.identifier("data")["has"]("password"))]);scope.assignmentExpression(["cond"],["=",scope.binaryExpression("&&",scope.identifier("cond"),scope.identifier("passPattern")["test"](scope.identifier("data")["password"]))]);scope.declarationExpression({type:"let",name:"text",value:ScopeApi['if'](scope.identifier("cond"),scope.createScope(function(args){return scope.xmlExpression("span",{"style":scope.mapExpression(["color","green"],["font-weight","bold"])},"Registration passes criteria.");}),scope.createScope(function(args){return scope.xmlExpression("span",{"style":scope.mapExpression(["color","red"],["font-weight","bold"])},"Registration doesn't pass criteria. Username and Password must be at least 3 characters long.");}))});scope.identifier("client")["emit"]("register",scope.identifier("text"));}));}));scope.identifier("server")["get"]("/",scope.createScope(function(args){scope.declarationExpression({type:"let",name:"client",value:args[0]===undefined?scope.arrayExpression():args[0]});scope.identifier("client")["response"]["render"](scope.identifier("page"));}));scope.identifier("server")["listen"](scope.mapExpression(["port",8000],["clientScope",true]));})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NwZW5jZS9Qcm9qZWN0cy9zY29wZS90ZXN0L2h1bWFuVGVzdHMvbmV3U2l0ZS5zYyJdLCJuYW1lcyI6WyJyb290LT5yb290Iiwicm9vdC0+cm9vdC0+cm9vdCIsInJvb3QtPmRlY2xhcmF0aW9uRXhwcmVzc2lvbiIsInJvb3QtPnNlcnZlciIsInJvb3QtPmltcG9ydEV4cHJlc3Npb24iLCJyb290LT5pbnZva2VFeHByZXNzaW9uIiwicm9vdC0+dGVsbFNlcnZlciIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQiLCJyb290LT5zY29wZUV4cHJlc3Npb24iLCJyb290LT5zY29wZVN0YXJ0LT5pZGVudGlmaWVyIiwicm9vdC0+c2NvcGVTdGFydC0+aW52b2tlRXhwcmVzc2lvbiIsInJvb3QtPnNjb3BlU3RhcnQtPmRlY2xhcmF0aW9uRXhwcmVzc2lvbiIsInJvb3QtPnNjb3BlU3RhcnQtPmRhdGEiLCJyb290LT5zY29wZVN0YXJ0LT5tYXBFeHByZXNzaW9uIiwicm9vdC0+c2NvcGVTdGFydC0+YXJyYXlTdGFydC0+YXNzb2NpYXRpdmVEZWNsYXJhdGlvbiIsInJvb3QtPnNjb3BlU3RhcnQtPmFycmF5U3RhcnQtPmlkZW50aWZpZXIiLCJyb290LT5zY29wZVN0YXJ0LT5hcnJheVN0YXJ0LT5hc3NvY2lhdGl2ZUxpc3QiLCJyb290LT5zY29wZVN0YXJ0LT5zdHJpbmdMaXRlcmFsIiwicm9vdC0+c2NvcGVTdGFydC0+ZXhwcmVzc2lvbkxpc3QiLCJyb290LT5zY29wZVN0YXJ0LT5yZXR1cm5FeHByZXNzaW9uIiwicm9vdC0+c2NvcGVTdGFydC0+Ym9vbGVhbkxpdGVyYWwiLCJyb290LT51c2VyUGF0dGVybiIsInJvb3QtPnJlZ2V4TGl0ZXJhbCIsInJvb3QtPnBhc3NQYXR0ZXJuIiwicm9vdC0+bWFrZVVzZXJGb3JtIiwicm9vdC0+eG1sRXhwcmVzc2lvbiIsInJvb3QtPmlkZW50aWZpZXIiLCJyb290LT54bWxBdHRyaWJ1dGVzIiwicm9vdC0+c3RyaW5nTGl0ZXJhbCIsInJvb3QtPnhtbENvbnRyb2xDb2RlIiwicm9vdC0+bnVtZXJpY0xpdGVyYWwiLCJyb290LT5ib29sZWFuTGl0ZXJhbCIsInJvb3QtPnBhZ2UiLCJyb290LT5leHByZXNzaW9uTGlzdCIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQiLCJyb290LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5pZGVudGlmaWVyIiwicm9vdC0+c2NvcGVTdGFydC0+c2NvcGVTdGFydC0+aW52b2tlRXhwcmVzc2lvbiIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPnN0cmluZ0xpdGVyYWwiLCJyb290LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5leHByZXNzaW9uTGlzdCIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlRXhwcmVzc2lvbiIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPmRlY2xhcmF0aW9uRXhwcmVzc2lvbiIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPmNvbmQiLCJyb290LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5hc3NpZ25tZW50RXhwcmVzc2lvbiIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPmFzc2lnbm1lbnRWYWx1ZSIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPmJpbmFyeUV4cHJlc3Npb24iLCJyb290LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT50ZXh0Iiwicm9vdC0+c2NvcGVTdGFydC0+c2NvcGVTdGFydC0+c2NvcGVTdGFydC0+c2NvcGVTdGFydCIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPnJldHVybkV4cHJlc3Npb24iLCJyb290LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT54bWxFeHByZXNzaW9uIiwicm9vdC0+c2NvcGVTdGFydC0+c2NvcGVTdGFydC0+c2NvcGVTdGFydC0+aWRlbnRpZmllciIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPnhtbEF0dHJpYnV0ZXMiLCJyb290LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5tYXBFeHByZXNzaW9uIiwicm9vdC0+c2NvcGVTdGFydC0+c2NvcGVTdGFydC0+c2NvcGVTdGFydC0+YXJyYXlTdGFydC0+YXNzb2NpYXRpdmVEZWNsYXJhdGlvbiIsInJvb3QtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPnNjb3BlU3RhcnQtPmFycmF5U3RhcnQtPnN0cmluZ0xpdGVyYWwiLCJyb290LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5hcnJheVN0YXJ0LT5hc3NvY2lhdGl2ZUxpc3QiLCJyb290LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5zY29wZVN0YXJ0LT5zdHJpbmdMaXRlcmFsIiwicm9vdC0+c2NvcGVTdGFydC0+c2NvcGVTdGFydC0+c2NvcGVFeHByZXNzaW9uIiwicm9vdC0+bWFwRXhwcmVzc2lvbiIsInJvb3QtPmFycmF5U3RhcnQtPmFzc29jaWF0aXZlRGVjbGFyYXRpb24iLCJyb290LT5hcnJheVN0YXJ0LT5udW1lcmljTGl0ZXJhbCIsInJvb3QtPmFycmF5U3RhcnQtPmFzc29jaWF0aXZlTGlzdCIsInJvb3QtPmFycmF5U3RhcnQtPmJvb2xlYW5MaXRlcmFsIl0sIm1hcHBpbmdzIjoiQUF5RjRDQTtBQUFBQSw0UkFBQUMsaUNBekZoQkMsNkNBQXhCQyxRQUF3QkQsT0FBREUsa0VBQUNDLEVBQUFILEVBQUFGLENBU2ZFLDZDQVBUSSxZQU9TSixPQU5aSyxpQ0FNWUMsaUhBTlBDLDJDQUFnQkMsRUFBQUgsQ0FHTEksNkNBRlpDLE1BRVlELE9BQUFFLG9CQURBQyxZQUFBQyx3REFBQUQsQ0FDQUUsQ0FBQUYsWUFBQUMsd0RBQUFELENBQUFELENBQUFGLEVBQUFKLENBRVZFLGtDQUFzQkMsQ0FBTk8sVUFBTUMsQ0FBQVQsd0JBQUFDLENBQUFILENBQ2hCWSxPQUFBQyxLQUFBYixDQUFBQyxF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Q09FLENBQUFGLGVBQUFDLE1BQUFELENBQUFELENBRWRILEVBRDBGTywrRkFDMUZQLENBQUFGLENBQUFVLEVBQUFwQixDQUFBSSxFQUFBTixDQUVEQyxrQ0FBc0JDLENBQU5DLFVBQU1DLENBQUFILHdCQUFBQyxDQUFBRixDQUFBSyxFQUFBN0IsQ0FBQUgsQ0FBQUMsRUFBQUgsQ0FBQUwsQ0FJeEIwQixpQ0FDc0JyQixDQURkdUIsR0FDY0ssQ0FBM0IxQixpQ0FBMkJDLGtIQUFyQkMsZ0RBQXFCQyxDQUFBRCx3QkFBQUMsQ0FBQUgsQ0FBQUMsRUFBQUgsQ0FBQUwsQ0FHdEIwQixvQ0FBc0NyQixDQUFBb0Qsb0JBQW5CQyxRQUFBQyxJQUFBRCxDQUFtQkUsQ0FBQUYsZUFBQUcsSUFBQUgsQ0FBQUQsQ0FBQXBELENBQUFMIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHNlcnZlciA9IGltcG9ydCBcInNlcnZlXCIoKTtcblxubGV0IHRlbGxTZXJ2ZXIgPSAoZXZlbnQ6IFtdKSB7XG5cdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdGxldCBkYXRhID0gW1xuXHRcdHVzZXJuYW1lOiBldmVudC50YXJnZXQudXNlcm5hbWUudmFsdWUsXG5cdFx0cGFzc3dvcmQ6IGV2ZW50LnRhcmdldC5wYXNzd29yZC52YWx1ZVxuXHRdO1xuXHRzb2NrZXQuZW1pdChcInJlZ2lzdGVyXCIsIGRhdGEpO1xuXHRyZXR1cm4gZmFsc2U7XG59O1xubGV0IHVzZXJQYXR0ZXJuID0gL15bYS16QS1aMC05LV9dezMsMzJ9JC87XG5sZXQgcGFzc1BhdHRlcm4gPSAvXig/PS4qW2EtekEtWl0rKSg/PS4qWzAtOV0rKSg/PS4qW15hLXpBLVowLTldKS57MywzMn0kLztcbmxldCBtYWtlVXNlckZvcm0gPSBcbjxmb3JtIG9uU3VibWl0PXRlbGxTZXJ2ZXI+XG5cdDxsYWJlbCBmb3I9XCJ1c2VybmFtZVwiPlxuXHRcdFwiVXNlcm5hbWVzIG1heSBoYXZlIDMtMzIgbGV0dGVycywgbnVtYmVycywgaHlwaGVucyAoLSkgYW5kIHVuZGVyc2NvcmVzIChfKS5cIjtcblx0PC9sYWJlbD47XG5cdDxiciAvPjtcblx0PGlucHV0IFxuXHRcdGlkPVwidXNlcm5hbWVcIiBcblx0XHRuYW1lPVwidXNlcm5hbWVcIiBcblx0XHRwbGFjZWhvbGRlcj1cIlVzZXJuYW1lXCIgXG5cdFx0cGF0dGVybj11c2VyUGF0dGVybiBcblx0XHRtaW5sZW5ndGg9MyBcblx0XHRtYXhMZW5ndGg9MzIgXG5cdFx0cmVxdWlyZWQ9dHJ1ZSBcblx0Lz47XG5cdDxiciAvPjtcblx0PGxhYmVsIGZvcj1cInBhc3N3b3JkXCI+XG5cdFx0XCJQYXNzd29yZHMgbWF5IGhhdmUgMy0zMiBjaGFyYWN0ZXJzLSBidXQgbXVzdCBjb250YWluIGF0IGxlYXN0IDEgbGV0dGVyLCAxIG51bWJlciwgYW5kIDEgc3BlY2lhbCBjaGFyYWN0ZXIuXCI7XG5cdDwvbGFiZWw+O1xuXHQ8YnIgLz47XG5cdDxpbnB1dCBcblx0XHRpZD1cInBhc3N3b3JkXCIgXG5cdFx0dHlwZT1cInBhc3N3b3JkXCIgXG5cdFx0bmFtZT1cInBhc3N3b3JkXCIgXG5cdFx0cGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiIFxuXHRcdHBhdHRlcm49cGFzc1BhdHRlcm4gXG5cdFx0bWlubGVuZ3RoPTMgXG5cdFx0bWF4TGVuZ3RoPTMyIFxuXHRcdHJlcXVpcmVkPXRydWUgXG5cdC8+O1xuXHQ8YnIgLz47XG5cdDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPlwiUmVnaXN0ZXJcIjs8L2J1dHRvbj47XG48L2Zvcm0+O1xuXG5sZXQgcGFnZSA9IDxodG1sPlxuPGhlYWQ+XG5cdDx0aXRsZT5cInJlZ2lzdGVyXCI7PC90aXRsZT47XG48L2hlYWQ+O1xuPGJvZHk+XG5cdDxkaXYgYmluZC1vdXQ9XCJyZWdpc3RlclwiIC8+O1xuXHRtYWtlVXNlckZvcm07XG48L2JvZHk+O1xuPC9odG1sPjtcblxuc2VydmVyLm9uKFwicmVnaXN0ZXJcIiwgKGNsaWVudDogW10sIGRhdGE6IFtdKSB7XG5cdGlmIChkYXRhLmhhcyhcImVycm9yXCIpLCB7XG5cdFx0cHJpbnQoZGF0YS5lcnJvcik7XG5cdFx0Y2xpZW50LmVtaXQoXCJyZWdpc3RlclwiLCBcIlNvbWV0aGluZyB3ZW50IHdyb25nLi5cIik7XG5cdH0sIHtcblx0XHRsZXQgY29uZCA9IGRhdGEuaGFzKFwidXNlcm5hbWVcIik7XG5cdFx0Y29uZCA9IGNvbmQgYW5kIHVzZXJQYXR0ZXJuLnRlc3QoZGF0YS51c2VybmFtZSk7XG5cdFx0Y29uZCA9IGNvbmQgYW5kIGRhdGEuaGFzKFwicGFzc3dvcmRcIik7XG5cdFx0Y29uZCA9IGNvbmQgYW5kIHBhc3NQYXR0ZXJuLnRlc3QoZGF0YS5wYXNzd29yZCk7XG5cdFx0bGV0IHRleHQgPSBpZiAoY29uZCwge1xuXHRcdFx0cmV0dXJuIFxuXHRcdFx0PHNwYW4gc3R5bGU9W1xuXHRcdFx0XHRjb2xvcjogXCJncmVlblwiLFxuXHRcdFx0XHRmb250LXdlaWdodDogXCJib2xkXCJdPlxuXHRcdFx0XHRcIlJlZ2lzdHJhdGlvbiBwYXNzZXMgY3JpdGVyaWEuXCI7XG5cdFx0XHQ8L3NwYW4+O1xuXHRcdH0sIHtcblx0XHRcdHJldHVybiBcblx0XHRcdDxzcGFuIHN0eWxlPVtcblx0XHRcdFx0Y29sb3I6IFwicmVkXCIsIFxuXHRcdFx0XHRmb250LXdlaWdodDogXCJib2xkXCJdPlxuXHRcdFx0XHRcIlJlZ2lzdHJhdGlvbiBkb2Vzbid0IHBhc3MgY3JpdGVyaWEuIFVzZXJuYW1lIGFuZCBQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDMgY2hhcmFjdGVycyBsb25nLlwiO1xuXHRcdFx0PC9zcGFuPjtcblx0XHR9KTtcblx0XHRjbGllbnQuZW1pdChcInJlZ2lzdGVyXCIsIHRleHQpO1xuXHR9KTtcbn0pO1xuXG5zZXJ2ZXIuZ2V0KFwiL1wiLCAoY2xpZW50OiBbXSkge1xuXHRjbGllbnQucmVzcG9uc2UucmVuZGVyKHBhZ2UpO1xufSk7XG5cbnNlcnZlci5saXN0ZW4oW3BvcnQ6IDgwMDAsIGNsaWVudFNjb3BlOiB0cnVlXSk7Il19