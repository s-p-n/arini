#!/usr/bin/env node
"use strict";global.__scopedir=__dirname;require("source-map-support").install();const scope=require("/home/spence/Projects/scope/lib/scopeRuntime.js");const ScopeApi=require("/home/spence/Projects/scope/lib/scopeRuntimeApi.js")(scope);module.exports=scope.createScope((args)=>{scope.declarationExpression({type:"let",name:"Serve",value:scope.import("/home/spence/Projects/scope/packages/serve/main.js")});scope.declarationExpression({type:"let",name:"server",value:scope.identifier("Serve")()});scope.identifier("server")["get"]("/",scope.createScope((args)=>{scope.declarationExpression({type:"let",name:"client",value:args[0]===undefined?scope.mapExpression():args[0]});scope.identifier("client")["response"]["render"](scope.identifier("site"));}));scope.identifier("server")["on"]("buttonClick",scope.createScope((args)=>{scope.declarationExpression({type:"let",name:"client",value:args[0]===undefined?scope.mapExpression():args[0]});ScopeApi.print("got click");scope.identifier("client")["emit"]("response","Message from Outer-space");}));scope.identifier("server")["listen"](scope.mapExpression(["port",8080],["clientScope",true]),scope.createScope((args)=>{ScopeApi.print("Server running on port 8080");}));scope.declarationExpression({type:"let",name:"tellServer",value:scope.createScope((args)=>{scope.declarationExpression({type:"let",name:"e",value:args[0]===undefined?scope.mapExpression():args[0]});scope.identifier("socket")["emit"]("buttonClick");})});scope.declarationExpression({type:"let",name:"button",value:scope.xmlExpression("button",{"onclick":scope.identifier("tellServer")},"Click me")});scope.declarationExpression({type:"let",name:"site",value:scope.xmlExpression("html",{},scope.xmlExpression("head",{},scope.xmlExpression("title",{},"Example Site")),scope.xmlExpression("body",{},scope.xmlExpression("div",{"bind-out":"response"}),scope.identifier("button")))});})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NwZW5jZS9Qcm9qZWN0cy9zY29wZS90ZXN0L2h1bWFuVGVzdHMvYnV0dG9uQ2xpY2suc2MiXSwibmFtZXMiOlsiPGFub255bW91c2U+Iiwic2VydmVyIiwic2NvcGUuaWRlbnRpZmllcihcInNlcnZlclwiKS5nZXQiLCJpbnZva2VFeHByZXNzaW9uIiwiY2xpZW50Iiwic2NvcGUuaWRlbnRpZmllcihcImNsaWVudFwiKS5yZXNwb25zZSIsInNjb3BlLmlkZW50aWZpZXIoXCJjbGllbnRcIilbXCJyZXNwb25zZVwiXS5yZW5kZXIiLCJzaXRlIiwic2NvcGUuaWRlbnRpZmllcihcInNlcnZlclwiKS5vbiIsInByaW50Iiwic2NvcGUuaWRlbnRpZmllcihcImNsaWVudFwiKS5lbWl0Iiwic2NvcGUuaWRlbnRpZmllcihcInNlcnZlclwiKS5saXN0ZW4iXSwibWFwcGluZ3MiOiJBQWdDUUE7QUFBQUEsc1JBaENrQkEsZ0lBRVBBLDBGQUViQywwQkFBQUMsT0FDc0JDLENBRGRILEdBQ2NBLDRJQUFyQkksMEJBQUFDLFlBQUFDLFVBQXFCSCxDQUFBSSx3QkFBQUosQ0FBQUgsR0FBQUcsQ0FBQUgsQ0FHdEJDLDBCQUFBTyxNQUU2Q0wsQ0FGNUJILGFBRTRCQSw0SUFEN0NTLGNBQVlOLENBQUFILFdBQUFHLENBQUFILENBQ1hJLDBCQUFBTSxRQUE0Q1AsQ0FBNUJILFVBQTRCQSwyQkFBQUcsQ0FBQUgsR0FBQUcsQ0FBQUgsQ0FHN0NDLDBCQUFBVSxVQUM4QlIsQ0FEUUgsdURBQ1JBLDRCQUE5QlMsY0FBOEJOLENBQUFILDZCQUFBRyxDQUFBSCxHQUFBRyxDQUFBSCxDQUlWQSw2UEFJZkEsa0pBVUhBLHdSQUFBRyxFQUFBSCIsInNvdXJjZXNDb250ZW50IjpbImxldCBTZXJ2ZSA9IGltcG9ydCBcInNlcnZlXCI7XG5cbmxldCBzZXJ2ZXIgPSBTZXJ2ZSgpO1xuXG5zZXJ2ZXIuZ2V0KFwiL1wiLCAoY2xpZW50OiBbXSkge1xuXHRjbGllbnQucmVzcG9uc2UucmVuZGVyKHNpdGUpO1xufSk7XG5cbnNlcnZlci5vbihcImJ1dHRvbkNsaWNrXCIsIChjbGllbnQ6IFtdKSB7XG5cdHByaW50KFwiZ290IGNsaWNrXCIpO1xuXHRjbGllbnQuZW1pdChcInJlc3BvbnNlXCIsIFwiTWVzc2FnZSBmcm9tIE91dGVyLXNwYWNlXCIpO1xufSk7XG5cbnNlcnZlci5saXN0ZW4oW3BvcnQ6IDgwODAsIGNsaWVudFNjb3BlOiB0cnVlXSwge1xuXHRwcmludChcIlNlcnZlciBydW5uaW5nIG9uIHBvcnQgODA4MFwiKTtcbn0pO1xuXG5sZXQgdGVsbFNlcnZlciA9IChlOiBbXSkge1xuXHRzb2NrZXQuZW1pdChcImJ1dHRvbkNsaWNrXCIpO1xufTtcblxubGV0IGJ1dHRvbiA9IDxidXR0b24gb25jbGljaz10ZWxsU2VydmVyPlxuXHRcIkNsaWNrIG1lXCI7XG48L2J1dHRvbj47XG5cbmxldCBzaXRlID0gXG48aHRtbD5cblx0PGhlYWQ+XG5cdFx0PHRpdGxlPlwiRXhhbXBsZSBTaXRlXCI7PC90aXRsZT47XG5cdDwvaGVhZD47XG5cdDxib2R5PlxuXHRcdDxkaXYgYmluZC1vdXQ9XCJyZXNwb25zZVwiIC8+O1xuXHRcdGJ1dHRvbjtcblx0PC9ib2R5PjtcbjwvaHRtbD47Il19